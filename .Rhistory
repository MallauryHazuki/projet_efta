EFTA0 = list(
"Nom" = nomgen,
"Catégorie d'activité" = nafgen,
"Catégorie d'objet " = cpfgen
)
return(EFTA0)
}
EFTAgen_v0()
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 1
noms_L0 <- names(L0)
for (i in 1:length(L0)){
print(noms_L0[i])
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 1
noms_L0 <- names(L0)
for (i in 1:length(L0)){
print(noms_L0[i])
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
# 04.Z Générations d'EFTA -------------------------------------------------
L0 <- EFTAgen_v0()
L0
# 05. Exports -----------------------------------------------------------
# TODO exporte un EFTA vers un fichier à définit (Excel ? parquet ? html ? autre ?)
source("01_scripts/05_exports/export0.R")
lignes_titres <- c()
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 1
lignes_titres <- c()
style_titres = createStyle(fgFill = " #F52731")
noms_L0 <- names(L0)
for (i in 1:length(L0)){
lignes_titres <- c(lignes_titre, ligne_ecriture)
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
addStyle(wb0, sheet0, style = style_titres,
rows = lignes_titres1, cols = 2)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
style_titres = createStyle(fgFill = " #F52731")
style_titres = createStyle(fgFill = " #E30205")
style_titres = createStyle(fgFill = " #00968F")
style_titres = createStyle(fgFill = " #00968F")
style_titres = createStyle(fgFill = "#E30205")
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 1
lignes_titres <- c()
style_titres = createStyle(fgFill = "#E30205")
noms_L0 <- names(L0)
for (i in 1:length(L0)){
lignes_titres <- c(lignes_titre, ligne_ecriture)
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
addStyle(wb0, sheet0, style = style_titres,
rows = lignes_titres1, cols = 2)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 1
lignes_titres <- c()
style_titres = createStyle(fgFill = "#E30205")
noms_L0 <- names(L0)
for (i in 1:length(L0)){
lignes_titres <- c(lignes_titre, ligne_ecriture)
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
addStyle(wb0, sheet0, style = style_titres,
rows = lignes_titres1, cols = 2)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 1
lignes_titres <- c()
style_titres = createStyle(fgFill = "#E30205")
noms_L0 <- names(L0)
for (i in 1:length(L0)){
lignes_titres <- c(lignes_titre, ligne_ecriture)
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
addStyle(wb0, sheet0, style = style_titres,
rows = lignes_titres1, cols = 2)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
addStyle(wb0, sheet0, style = style_titres,
rows = lignes_titres, cols = 2)
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 1
lignes_titres <- c()
style_titres = createStyle(fgFill = "#E30205")
noms_L0 <- names(L0)
for (i in 1:length(L0)){
lignes_titres <- c(lignes_titre, ligne_ecriture)
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
addStyle(wb0, sheet0, style = style_titres,
rows = lignes_titres, cols = 2)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
lignes_titres <- c()
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 1
lignes_titres <- c()
style_titres = createStyle(fgFill = "#E30205")
noms_L0 <- names(L0)
for (i in 1:length(L0)){
lignes_titres <- c(lignes_titres, ligne_ecriture)
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
addStyle(wb0, sheet0, style = style_titres,
rows = lignes_titres, cols = 2)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 1
lignes_titres <- c()
style_titres = createStyle(fgFill = "#2D02C2", fontSize = 14, fontColour = "#EBE6FF")
noms_L0 <- names(L0)
for (i in 1:length(L0)){
lignes_titres <- c(lignes_titres, ligne_ecriture)
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
addStyle(wb0, sheet0, style = style_titres,
rows = lignes_titres, cols = 2)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
# EFTA - ENERGUMÈNES FRANCOMORPHES TOTALEMENT ALEATOIRES ------------------
# 00. Architecture du dossier ----------------------------------------------
source("01_scripts/00_initialisation/init_dir.R")
# 01. Import des fichiers Insee --------------------------------------------
# TODO télécharger les bases utiles sur le site de l'Insee
source("01_scripts/01_imports/import_naf.R")
source("01_scripts/01_imports/import_cpf.R")
# 02. Affinement ----------------------------------------------------------
# TODO améliorer la forme des tables et filtrer les éléments inutilisables
source("01_scripts/02_affinement/filtre_naf.R")
source("01_scripts/02_affinement/filtre_cpf.R")
# 03. Fonctions génératives -----------------------------------------------
# TODO fonctions atomiques utilisées pour générer certains aspects des EFTA
source("01_scripts/03_fonctions_generatives/rtable.R")
# 04. Wrappers EFTAgen ----------------------------------------------------
# TODO combinaison de fonctions génératives pour créer des EFTA complets
source("01_scripts/04_wrappers_eftagen/EFTAgen_v0.R")
# 04.Z Générations d'EFTA -------------------------------------------------
L0 <- EFTAgen_v0()
L0
# 05. Exports -----------------------------------------------------------
# TODO exporte un EFTA vers un fichier à définit (Excel ? parquet ? html ? autre ?)
source("01_scripts/05_exports/export0.R")
# 00. Architecture du dossier ----------------------------------------------
source("01_scripts/00_initialisation/init_dir.R")
# 01. Import des fichiers Insee --------------------------------------------
# TODO télécharger les bases utiles sur le site de l'Insee
source("01_scripts/01_imports/import_naf.R")
source("01_scripts/01_imports/import_cpf.R")
# 02. Affinement ----------------------------------------------------------
# TODO améliorer la forme des tables et filtrer les éléments inutilisables
source("01_scripts/02_affinement/filtre_naf.R")
source("01_scripts/02_affinement/filtre_cpf.R")
# 03. Fonctions génératives -----------------------------------------------
# TODO fonctions atomiques utilisées pour générer certains aspects des EFTA
source("01_scripts/03_fonctions_generatives/rtable.R")
# 04. Wrappers EFTAgen ----------------------------------------------------
# TODO combinaison de fonctions génératives pour créer des EFTA complets
source("01_scripts/04_wrappers_eftagen/EFTAgen_v0.R")
# 04.Z Générations d'EFTA -------------------------------------------------
L0 <- EFTAgen_v0()
L0
# 05. Exports -----------------------------------------------------------
# TODO exporte un EFTA vers un fichier à définit (Excel ? parquet ? html ? autre ?)
source("01_scripts/05_exports/export0.R")
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 1
lignes_titres <- c()
style_titres = createStyle(fgFill = "#2D02C2", fontSize = 14, fontColour = "#EBE6FF")
noms_L0 <- names(L0)
for (i in 1:length(L0)){
lignes_titres <- c(lignes_titres, ligne_ecriture)
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
addStyle(wb0, sheet0, style = style_titres,
rows = lignes_titres, cols = 2)
setColWidths(wb°, sheet0, cols = 2, widths = 50)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
setColWidths(wb0, sheet0, cols = 2, widths = 50)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 1
lignes_titres <- c()
style_titres = createStyle(fgFill = "#2D02C2", fontSize = 14, fontColour = "#EBE6FF")
noms_L0 <- names(L0)
for (i in 1:length(L0)){
lignes_titres <- c(lignes_titres, ligne_ecriture)
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
addStyle(wb0, sheet0, style = style_titres,
rows = lignes_titres, cols = 2)
setColWidths(wb0, sheet0, cols = 2, widths = 50)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
style_grandtitre = createStyle(fontSize = 18, border = "TopBottomLeftRight")
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 2
lignes_titres <- c()
style_grandtitre = createStyle(fontSize = 18, border = "TopBottomLeftRight")
style_titres = createStyle(fgFill = "#2D02C2", fontSize = 14, fontColour = "#EBE6FF")
noms_L0 <- names(L0)
writeData(wb0, sheet0, x = "Feuille d'EFTA0", startCol = 1, startRow = 1)
addStyle(wb0, sheet0, style = style_grandtitre, rows = 1, cols = 1)
for (i in 1:length(L0)){
lignes_titres <- c(lignes_titres, ligne_ecriture)
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
addStyle(wb0, sheet0, style = style_titres,
rows = lignes_titres, cols = 2)
setColWidths(wb0, sheet0, cols = 2, widths = 150)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
# Fonction d'export pensé pour marcher avec les sorties du wrapper EFTAgen_v0.
# Crée un Excel un tout petit peu mis en forme avec les éléments demandés.
# On part du principe que l'objet L qu'on manipule est une Liste dont chaque
# élément est un tableau, éventuellement de longueur 1.)
wb0 <- createWorkbook()
sheet0 <- addWorksheet(wb0, "Feuille principale")
ligne_ecriture <- 3
lignes_titres <- c()
style_grandtitre = createStyle(fontSize = 18, border = "TopBottomLeftRight")
style_titres = createStyle(fgFill = "#2D02C2", fontSize = 14, fontColour = "#EBE6FF")
noms_L0 <- names(L0)
writeData(wb0, sheet0, x = "Feuille d'EFTA0", startCol = 1, startRow = 1)
addStyle(wb0, sheet0, style = style_grandtitre, rows = 1, cols = 1)
for (i in 1:length(L0)){
lignes_titres <- c(lignes_titres, ligne_ecriture)
writeData(wb0, sheet0, x = L0[[i]], startCol = 2, startRow = ligne_ecriture)
ligne_ecriture <- ligne_ecriture+2
}
addStyle(wb0, sheet0, style = style_titres,
rows = lignes_titres, cols = 2)
setColWidths(wb0, sheet0, cols = 2, widths = 100)
saveWorkbook(wb = wb0, "03_output/sortie_EFTA0_test.xlsx", overwrite = T)
# EFTA - ENERGUMÈNES FRANCOMORPHES TOTALEMENT ALEATOIRES ------------------
# 00. Architecture du dossier ----------------------------------------------
source("01_scripts/00_initialisation/init_dir.R")
# 01. Import des fichiers Insee --------------------------------------------
# TODO télécharger les bases utiles sur le site de l'Insee
source("01_scripts/01_imports/import_naf.R")
source("01_scripts/01_imports/import_cpf.R")
# 02. Affinement ----------------------------------------------------------
# TODO améliorer la forme des tables et filtrer les éléments inutilisables
source("01_scripts/02_affinement/filtre_naf.R")
source("01_scripts/02_affinement/filtre_cpf.R")
# 03. Fonctions génératives -----------------------------------------------
# TODO fonctions atomiques utilisées pour générer certains aspects des EFTA
source("01_scripts/03_fonctions_generatives/rtable.R")
# 04. Wrappers EFTAgen ----------------------------------------------------
# TODO combinaison de fonctions génératives pour créer des EFTA complets
source("01_scripts/04_wrappers_eftagen/EFTAgen_v0.R")
# 04.Z Générations d'EFTA -------------------------------------------------
L0 <- EFTAgen_v0()
L0
# 05. Exports -----------------------------------------------------------
# TODO exporte un EFTA vers un fichier à définit (Excel ? parquet ? html ? autre ?)
source("01_scripts/05_exports/export0.R")
# 06. EXPLOITATION
nombre_profils = 8
for (i in 1:nombre_profils){
L0 <- EFTAgen_v0(nb_naf = 1, nb_cpf = 5)
id_profil <- paste0("energumnene_numero_", i)
export0(L0 = L0, nom_sortie = id_profil)
}
prenoms
prenoms_brut <- read.csv2("02_data/prenoms-2024-nat.csv")
prenoms_brut
prenoms_brut %>% View()
View(prenoms)
prenoms <- read.csv2("02_data/prenoms-2024-nat.csv") %>%
select(prenom) %>%
unique() %>%
mutate(id = 1:nrow(.)) %>%
rename(lib = prenom) %>%
select(id, lib)
View(prenoms)
View(prenoms_brut)
prenoms_hors_hapax <- prenoms_brut %>%
filter(valeur > 2) %>%
select(prenom) %>%
unique() %>%
mutate(id = 1:nrow(.)) %>%
rename(lib = prenom) %>%
select(id, lib)
nrow(prenoms)
nrow(prenoms_hors_hapax)
prenoms_brut %>%
group_by(prenom) %>%
summarise(n())
prenoms_brut %>%
group_by(prenom) %>%
summarise(freqtot = sum(valeur)) %>%
arrange(freqtot)
prenoms_brut %>%
group_by(prenom) %>%
summarise(freqtot = sum(valeur)) %>%
arrange(freqtot) %>%
View()
prenoms_brut %>%
group_by(prenom) %>%
summarise(freqtot = sum(valeur)) %>%
arrange(freqtot) %>%
nrow()
prenoms_brut %>%
group_by(prenom) %>%
summarise(freqtot = sum(valeur)) %>%
arrange(freqtot) %>%
filter(freqtot > 5) %>%
nrow()
prenoms_hors_hapax <- prenoms_brut %>%
filter(valeur > 5) %>%
select(prenom) %>%
unique() %>%
mutate(id = 1:nrow(.)) %>%
rename(lib = prenom) %>%
select(id, lib)
nrow(prenoms_hors_hapax)
prenoms_brut %>%
group_by(prenom) %>%
summarise(freqtot = sum(valeur)) %>%
arrange(freqtot) %>%
filter(freqtot > 5) %>%
View()
prenoms_brut %>%
group_by(prenom) %>%
summarise(freqtot = sum(valeur)) %>%
arrange(freqtot) %>%
head(round(nrow(.)*headpct))
headpct <- 0.01
prenoms_brut %>%
group_by(prenom) %>%
summarise(freqtot = sum(valeur)) %>%
arrange(freqtot) %>%
head(round(nrow(.)*headpct))
prenoms_brut %>%
group_by(prenom) %>%
summarise(freqtot = sum(valeur)) %>%
arrange(desc(freqtot)) %>%
head(round(nrow(.)*headpct))
q <- 0.01
top_quantile_q <- prenoms_brut %>%
group_by(prenom) %>%
summarise(freqtot = sum(valeur)) %>%
arrange(desc(freqtot)) %>%
head(round(nrow(.)*q))
rm(list = ls())
# EFTA - ENERGUMÈNES FRANCOMORPHES TOTALEMENT ALEATOIRES ------------------
# 00. Architecture du dossier ----------------------------------------------
source("01_scripts/00_initialisation/init_dir.R")
# 01. Import des fichiers Insee --------------------------------------------
# TODO télécharger les bases utiles sur le site de l'Insee
source("01_scripts/01_imports/import_naf.R")
source("01_scripts/01_imports/import_cpf.R")
source("01_scripts/01_imports/import_prenoms.R")
# 02. Affinement ----------------------------------------------------------
# TODO améliorer la forme des tables et filtrer les éléments inutilisables
source("01_scripts/02_affinement/filtre_naf.R")
source("01_scripts/02_affinement/filtre_cpf.R")
source("01_scripts/02_affinement/filtre_prenoms.R")
# 03. Fonctions génératives -----------------------------------------------
# TODO fonctions atomiques utilisées pour générer certains aspects des EFTA
source("01_scripts/03_fonctions_generatives/rtable.R")
# 04. Wrappers EFTAgen ----------------------------------------------------
# TODO combinaison de fonctions génératives pour créer des EFTA complets
source("01_scripts/04_wrappers_eftagen/EFTAgen_v0.R")
# 05. Exports -----------------------------------------------------------
# TODO exporte un EFTA vers un fichier à définit (Excel ? parquet ? html ? autre ?)
source("01_scripts/05_exports/export0.R")
# 06. EXPLOITATION
nombre_profils = 6
for (i in 1:nombre_profils){
L0 <- EFTAgen_v0(nb_naf = 1, nb_cpf = 5)
id_profil <- paste0("energumene_numero_", i)
export0(L0 = L0, nom_sortie = id_profil)
}
# EFTA - ENERGUMÈNES FRANCOMORPHES TOTALEMENT ALEATOIRES ------------------
# 00. Architecture du dossier ----------------------------------------------
source("01_scripts/00_initialisation/init_dir.R")
# 01. Import des fichiers Insee --------------------------------------------
# TODO télécharger les bases utiles sur le site de l'Insee
source("01_scripts/01_imports/import_naf.R")
source("01_scripts/01_imports/import_cpf.R")
source("01_scripts/01_imports/import_prenoms.R")
# 02. Affinement ----------------------------------------------------------
# TODO améliorer la forme des tables et filtrer les éléments inutilisables
source("01_scripts/02_affinement/filtre_naf.R")
source("01_scripts/02_affinement/filtre_cpf.R")
source("01_scripts/02_affinement/filtre_prenoms.R")
# 03. Fonctions génératives -----------------------------------------------
# TODO fonctions atomiques utilisées pour générer certains aspects des EFTA
source("01_scripts/03_fonctions_generatives/rtable.R")
# 04. Wrappers EFTAgen ----------------------------------------------------
# TODO combinaison de fonctions génératives pour créer des EFTA complets
source("01_scripts/04_wrappers_eftagen/EFTAgen_v0.R")
# 05. Exports -----------------------------------------------------------
# TODO exporte un EFTA vers un fichier à définit (Excel ? parquet ? html ? autre ?)
source("01_scripts/05_exports/export0.R")
prenoms_top_quantile_q <- prenoms_brut %>%
group_by(prenom) %>%
summarise(freqtot = sum(valeur)) %>%
arrange(desc(freqtot)) %>%
head(round(nrow(.)*q))
# 06. EXPLOITATION
nombre_profils = 6
for (i in 1:nombre_profils){
L0 <- EFTAgen_v0(nb_naf = 1, nb_cpf = 5, liste_prenoms = prenoms_top_quantile_q)
id_profil <- paste0("energumene_numero_", i)
export0(L0 = L0, nom_sortie = id_profil)
}
prenoms_top_quantile_q <- prenoms_brut %>%
group_by(prenom) %>%
summarise(freqtot = sum(valeur), .groups = "drop") %>%
arrange(desc(freqtot)) %>%
head(round(nrow(.)*q))
prenoms_top_quantile_q
prenoms_top_quantile_q <- prenoms_brut %>%
group_by(prenom) %>%
summarise(freqtot = sum(valeur), .groups = "drop") %>%
arrange(desc(freqtot)) %>%
head(round(nrow(.)*q)) %>%
mutate(id = 1:nrow(.)) %>%
rename(lib = prenom) %>%
select(id, lib)
for (i in 1:nombre_profils){
L0 <- EFTAgen_v0(nb_naf = 1, nb_cpf = 5, liste_prenoms = prenoms_top_quantile_q)
id_profil <- paste0("energumene_numero_", i)
export0(L0 = L0, nom_sortie = id_profil)
}
nombre_prenoms <- round(rexp(n = 100, rate = .6)+1)
round(rexp(n = 100, rate = .6)+1)
round(rexp(n = 100, rate = .6)+1)
round(rexp(n = 100, rate = .6)+1)
round(rexp(n = 100, rate = .6)+1)
round(rexp(n = 100, rate = .6)+1)
round(rexp(n = 100, rate = .6)+1)
round(rexp(n = 100, rate = .6)+1)
round(rexp(n = 100, rate = .6)+1)
nombre_prenoms <- round(rexp(n = 1, rate = .6)+1)
